{% extends 'base.html' %}
{% load static %}
{% block title %}Cart{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/cake.css' %}">
{% endblock %}
{% block content %}
<div class="cart-section container" style="max-width:1100px;margin:20px auto;padding:12px;">
  <h2 class="section-title">YOUR CART</h2>
  {% if cart and cart|length > 0 %}
  <div class="cart-list">
    {% for item in cart %}
  <div class="cake-card" style="position:relative;display:flex;gap:12px;align-items:center;padding:10px;margin-bottom:12px;">
      <div style="width:120px;flex:0 0 120px;">
        <img src="{{ item.img }}" style="width:100%;height:90px;object-fit:cover;border-radius:8px;"/>
      </div>
      <div style="flex:1;">
        <h4 style="margin:0">{{ item.name }}</h4>
        <p style="margin:4px 0;color:#666">{{ item.price }}</p>
        <p style="margin:4px 0;color:#666">Weight: {{ item.weight|default:'1 KG' }} | Quantity: {{ item.quantity|default:1 }}</p>
      </div>
      <div style="flex:0 0 160px;text-align:right;padding-left:8px;">
        <div style="position:absolute;top:10px;right:10px;display:flex;gap:8px;">
          <form method="post" action="{% url 'remove_from_cart' %}" style="display:inline">
            {% csrf_token %}
            <input type="hidden" name="img" value="{{ item.img }}">
            <button class="btn btn-outline-danger" type="submit">Remove</button>
          </form>
          <a class="btn btn-warning" href="{% url 'checkout' %}?name={{ item.name|urlencode }}&img={{ item.img|urlencode }}&price={{ item.price|urlencode }}&quantity={{ item.quantity|urlencode }}&weight={{ item.weight|urlencode }}">Buy Now</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p>Your cart is empty.</p>
  {% endif %}
</div>
{% endblock %}
